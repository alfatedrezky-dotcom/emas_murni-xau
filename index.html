<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SMC XT12 ULTRA TERMINAL</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffd700; --bg: #000; }
        body, html { margin: 0; padding: 0; background: var(--bg); color: #fff; font-family: sans-serif; height: 100%; overflow: hidden; }
        
        /* Navigasi Full Width */
        .nav { display: flex; background: #080808; border-bottom: 1px solid #222; height: 55px; }
        .nav-btn { flex: 1; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold; color: #555; cursor: pointer; transition: 0.3s; border-right: 1px solid #111; }
        .nav-btn.active { color: var(--gold); background: #111; border-bottom: 2px solid var(--gold); }

        .container { height: calc(100vh - 55px); width: 100%; position: relative; }
        .page { display: none; height: 100%; width: 100%; }
        .page.active { display: block; }

        /* Market Layout - Fix Sempit */
        .market-layout { display: flex; flex-direction: column; height: 100%; }
        .chart-area { flex: 1; min-height: 0; }
        .info-panel { height: 160px; background: #050505; border-top: 2px solid #111; display: grid; grid-template-columns: 1.2fr 1fr; gap: 10px; padding: 15px; }
        
        .box-elite { background: #0a0a0a; border: 1px solid #222; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #price { font-family: 'Orbitron'; font-size: 42px; color: var(--gold); margin: 0; }
        #signal { font-family: 'Orbitron'; font-size: 10px; margin-top: 8px; color: #888; letter-spacing: 1px; }

        /* Sentiment Gauge */
        .gauge-wrapper { width: 100%; padding: 0 10px; box-sizing: border-box; }
        .gauge-track { width: 100%; height: 10px; background: #1a1a1a; border-radius: 5px; position: relative; overflow: hidden; margin-top: 10px; }
        .gauge-fill { position: absolute; height: 100%; background: linear-gradient(to right, #ff4444, #ffd700, #00ff88); transition: 1s cubic-bezier(0.17, 0.67, 0.83, 0.67); }

        /* Frame Full untuk Finance & News */
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

<div class="nav">
    <div class="nav-btn active" onclick="tab('market')">MARKET</div>
    <div class="nav-btn" onclick="tab('finance')">FINANCE & RISK</div>
    <div class="nav-btn" onclick="tab('news')">ECONOMY NEWS</div>
</div>

<div class="container">
    <div id="market" class="page active">
        <div class="market-layout">
            <div id="tv_chart" class="chart-area"></div>
            <div class="info-panel">
                <div class="box-elite">
                    <div id="price">0.00</div>
                    <div id="signal">COLLECTING DATA...</div>
                </div>
                <div class="box-elite">
                    <span style="font-size: 9px; color: #444;">MARKET SENTIMENT</span>
                    <div class="gauge-wrapper">
                        <div class="gauge-track"><div id="gauge_fill" class="gauge-fill" style="width: 50%;"></div></div>
                        <div style="display:flex; justify-content:space-between; font-size:8px; color:#333; margin-top:5px;">
                            <span>BEARISH</span><span>BULLISH</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="finance" class="page">
        <iframe src="https://alfatedrezky-dotcom.github.io/emas_murni-xau/"></iframe>
    </div>

    <div id="news" class="page">
        <iframe src="https://www.tradingview-widget.com/embed-widget/events/?colorTheme=dark&isTransparent=false&width=100%&height=100%&locale=en&importanceFilter=-1,0,1&currencyFilter=USD"></iframe>
    </div>
</div>

<script src="https://s3.tradingview.com/tv.js"></script>
<script>
    new TradingView.widget({ "autosize": true, "symbol": "OANDA:XAUUSD", "interval": "1", "theme": "dark", "container_id": "tv_chart", "style": "1", "hide_top_toolbar": false, "withdateranges": true });

    const config = { databaseURL: "https://emas-murni-xau-default-rtdb.firebaseio.com" };
    firebase.initializeApp(config);
    const db = firebase.database();

    db.ref('live_monitor').on('value', (snapshot) => {
        const val = snapshot.val();
        if(!val) return;
        document.getElementById('price').innerText = val.price.toFixed(2);
        document.getElementById('signal').innerText = val.prediction;
        document.getElementById('gauge_fill').style.width = val.rsi + "%";
        
        // Warna Dinamis
        const sigTxt = val.prediction;
        const sigEl = document.getElementById('signal');
        if(sigTxt.includes("BUY")) sigEl.style.color = "#00ff88";
        else if(sigTxt.includes("SELL")) sigEl.style.color = "#ff4444";
        else sigEl.style.color = "#ffd700";
    });

    function tab(name) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(name).classList.add('active');
        event.currentTarget.classList.add('active');
    }
</script>
</body>
</html>
