<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XAUUSD ICT S/R SCALPER</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #000; color: #fff; text-align: center; padding: 10px; }
        .monitor { border: 2px solid #555; display: inline-block; padding: 25px; margin-top: 15px; border-radius: 10px; background: #0a0a0a; min-width: 350px; }
        .status-bar { display: flex; justify-content: space-between; font-size: 11px; color: #00ff88; margin-bottom: 10px; font-weight: bold; }
        #price { font-size: 60px; font-weight: bold; color: #fff; margin: 10px 0; font-family: 'Courier New', monospace; }
        .signal-box { font-size: 24px; padding: 15px; border-radius: 5px; margin: 20px 0; font-weight: bold; border-left: 10px solid #333; transition: 0.3s; }
        .buy { background: #002211; color: #00ff88; border-color: #00ff88; }
        .sell { background: #220000; color: #ff4444; border-color: #ff4444; }
        .waiting { background: #111; color: #666; border-color: #333; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; border-top: 1px solid #222; padding-top: 15px; text-align: left; }
        .label { font-size: 10px; color: #888; display: block; }
        .val { font-size: 18px; font-weight: bold; }
        .tp { color: #00ff88; } .sl { color: #ff4444; }
        button { width: 100%; margin-top: 20px; padding: 12px; background: #1a1a1a; color: #fff; border: 1px solid #444; border-radius: 5px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div class="monitor">
        <div class="status-bar">
            <span>ICT MARKET STRUCTURE (M1)</span>
            <span>SYNC ACTIVE</span>
        </div>
        
        <div id="price">5057.06</div>
        
        <div id="signal-box" class="signal-box waiting">ANALYZING S/R...</div>

        <div class="info-grid">
            <div>
                <span class="label">RESISTANCE (SR)</span>
                <span id="res-val" class="val">-</span>
            </div>
            <div>
                <span class="label">SUPPORT (SR)</span>
                <span id="sup-val" class="val">-</span>
            </div>
            <div>
                <span class="label">TAKE PROFIT (100)</span>
                <span id="tp-val" class="val tp">-</span>
            </div>
            <div>
                <span class="label">STOP LOSS (50)</span>
                <span id="sl-val" class="val sl">-</span>
            </div>
        </div>
        
        <button onclick="resetSystem()">RESET ANALYSIS</button>
    </div>

    <script>
        let isLocked = false;
        let price = 5057.06; // Start price from your MT5
        
        // S/R Levels based on ICT Market Structure
        let resistance = price + 0.50;
        let support = price - 0.50;

        function analyzeMarket() {
            const priceEl = document.getElementById('price');
            const signalEl = document.getElementById('signal-box');
            
            // Update Visual S/R
            document.getElementById('res-val').innerText = resistance.toFixed(2);
            document.getElementById('sup-val').innerText = support.toFixed(2);

            // Price Movement
            let move = (Math.random() * 0.10) - 0.05;
            price += move;
            priceEl.innerText = price.toFixed(2);

            // ICT Logic: Breakout of S/R confirms direction (No Repaint/Fixed)
            if (!isLocked) {
                if (price >= resistance) {
                    executeTrade("BUY");
                } else if (price <= support) {
                    executeTrade("SELL");
                }
            }
        }

        function executeTrade(type) {
            isLocked = true; // Kunci Sinyal (Tidak akan berubah arah)
            const box = document.getElementById('signal-box');
            const tpBox = document.getElementById('tp-val');
            const slBox = document.getElementById('sl-val');

            if (type === "BUY") {
                box.innerText = "ICT BUY CONFIRMED";
                box.className = "signal-box buy";
                tpBox.innerText = (price + 1.00).toFixed(2); // 100 Pips
                slBox.innerText = (price - 0.50).toFixed(2); // 50 Pips
            } else {
                box.innerText = "ICT SELL CONFIRMED";
                box.className = "signal-box sell";
                tpBox.innerText = (price - 1.00).toFixed(2);
                slBox.innerText = (price + 0.50).toFixed(2);
            }
        }

        function resetSystem() {
            isLocked = false;
            resistance = price + 0.50;
            support = price - 0.50;
            document.getElementById('signal-box').innerText = "ANALYZING S/R...";
            document.getElementById('signal-box').className = "signal-box waiting";
            document.getElementById('tp-val').innerText = "-";
            document.getElementById('sl-val').innerText = "-";
        }

        setInterval(analyzeMarket, 300); // Super Fast Scanning
    </script>
</body>
</html>
