<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XAU MONITOR V8.5 - SMC ELITE</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #FFD700; --bg: #0a0a0a; --card: #151515; --red: #ff4444; --green: #00ff66; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        .container { padding: 20px; max-width: 600px; margin: auto; }

        /* HEADER & STATUS */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .status-dot { height: 8px; width: 8px; background: var(--green); border-radius: 50%; display: inline-block; margin-right: 5px; box-shadow: 0 0 10px var(--green); }

        /* MAIN MONITOR CARD */
        .main-card { background: var(--card); border-radius: 20px; padding: 25px; border: 1px solid #222; position: relative; transition: all 0.4s ease; }
        .glow-buy { box-shadow: 0 0 40px rgba(0, 255, 102, 0.15); border-color: var(--green); }
        .glow-sell { box-shadow: 0 0 40px rgba(255, 68, 68, 0.15); border-color: var(--red); }

        .price-display { font-size: 48px; font-weight: 900; color: var(--gold); letter-spacing: -1px; margin: 5px 0; }
        .signal-badge { background: #222; padding: 5px 15px; border-radius: 50px; font-size: 12px; font-weight: bold; border: 1px solid #333; }
        
        /* STRENGTH BAR */
        .bar-container { background: #222; height: 8px; border-radius: 10px; margin: 20px 0; overflow: hidden; }
        .bar-fill { height: 100%; background: linear-gradient(90deg, var(--gold), #fff); transition: width 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* TP/SL BOX */
        .tpsl-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .box { background: #1a1a1a; padding: 12px; border-radius: 12px; border: 1px solid #282828; text-align: center; font-size: 11px; color: #888; }
        .box b { display: block; font-size: 14px; margin-top: 4px; }

        /* CHART VIEWPORT */
        .chart-frame { width: 100%; height: 400px; border-radius: 20px; border: 1px solid #222; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div><span class="status-dot"></span> <small style="color:#666">MT5 SERVER SYNC</small></div>
        <div id="realtime-clock" style="font-size: 12px; color: #444;">00:00:00</div>
    </div>

    <div class="main-card" id="card-monitor">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
                <span id="bias-label" class="signal-badge">SCANNING...</span>
                <div class="price-display" id="price-val">0000.00</div>
            </div>
            <div style="text-align: right;">
                <div id="signal-text" style="font-size: 16px; font-weight: bold; color: #fff;">WAITING SETUP</div>
                <small id="sync-tag" style="color: #444; font-size: 10px;">V8.5 ACTIVE</small>
            </div>
        </div>

        <div class="bar-container">
            <div id="strength-bar" class="bar-fill" style="width: 0%"></div>
        </div>

        <div class="tpsl-grid">
            <div class="box">STOP LOSS <b id="sl-price" style="color:var(--red)">--</b></div>
            <div class="box">TAKE PROFIT <b id="tp-price" style="color:var(--green)">--</b></div>
            <div class="box" style="border-color: var(--gold);">R:R RATIO <b id="rr-val" style="color:var(--gold)">1:2</b></div>
        </div>
    </div>

    <iframe class="chart-frame" src="https://s.tradingview.com/widgetembed/?symbol=OANDA%3AXAUUSD&interval=1&theme=dark"></iframe>
</div>

<script>
    // Konfigurasi Firebase
    const firebaseConfig = { databaseURL: "https://emas-murni-xau-default-rtdb.firebaseio.com" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database().ref('live_monitor');

    db.on('value', (snapshot) => {
        const d = snapshot.val();
        if(!d) return;

        // Sync Data Harga
        document.getElementById('price-val').innerText = d.price.toFixed(2);
        document.getElementById('signal-text').innerText = d.prediction;
        document.getElementById('strength-bar').style.width = d.strength + "%";
        document.getElementById('sync-tag').innerText = "SYNC: " + d.time;

        // Logika Bias & Glow
        const card = document.getElementById('card-monitor');
        const biasLabel = document.getElementById('bias-label');
        
        biasLabel.innerText = d.bias + " BIAS";
        biasLabel.style.color = d.bias === "BULLISH" ? "var(--green)" : "var(--red)";

        if(d.prediction.includes("BUY")) {
            card.className = "main-card glow-buy";
            document.getElementById('sl-price').innerText = (d.price - 2.50).toFixed(2);
            document.getElementById('tp-price').innerText = (d.price + 5.00).toFixed(2);
        } else if(d.prediction.includes("SELL")) {
            card.className = "main-card glow-sell";
            document.getElementById('sl-price').innerText = (d.price + 2.50).toFixed(2);
            document.getElementById('tp-price').innerText = (d.price - 5.00).toFixed(2);
        } else {
            card.className = "main-card";
            document.getElementById('sl-price').innerText = "--";
            document.getElementById('tp-price').innerText = "--";
        }
    });

    setInterval(() => { 
        document.getElementById('realtime-clock').innerText = new Date().toLocaleTimeString(); 
    }, 1000);
</script>

</body>
</html>
